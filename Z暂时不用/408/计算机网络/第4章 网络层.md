# 路由算法

## 距离-向量路由算法

所有结点都定期地将它们的整个路由选择表传送给所有与之直接相邻的结点。这种路由选择表包含:

每条路径的目的地(另一结点)。

路径的代价（也称距离)。

距离-向量路由算法的实质是，迭代计算一条路由中的站段数或延迟时间，从而得到到达一个目标的最短（最小代价）通路。它要求每个结点在每次更新时都将它的全部路由表发送给所有相邻的结点。由于更新报文发给直接邻接的结点，所以所有结点都将参加路由选择信息交换。

## 链路状态路由

链路状态路由算法要求每个参与该算法的结点都具有完全的网络拓扑信息

链路状态路由算法主要有三个特征:

1）向本自治系统中所有路由器发送信息，这里使用的方法是泛洪法，即路由器通过所有端口向所有相邻的路由器发送信息。而每个相邻路由器又将此信息发往其所有相邻路由器(但不再发送给刚刚发来信息的那个路由器)。

2）发送的信息是与路由器相邻的所有路由器的链路状态，但这只是路由器所知道的部分信息。所谓“链路状态”，是指说明本路由器与哪些路由器相邻及该链路的“度量”。对于OSPF算法，链路状态的“度量”主要用来表示费用、距离、时延、带宽等。

3）只有当链路状态发生变化时，路由器才向所有路由器发送此信息。

## NAT协议

将私有地址转换为公网ip地址

# ARP、DHCP、ICMP

## ARP地址解析协议

每台主机都设有一个ARP高速缓存，用来存放本局域网上各主机和路由器的IP地址到MAC地址的映射表，称ARP表。使用ARP来动态维护此ARP表

工作原理如下:主机A欲向本局域网上的某台主机B发送P数据报时，先在其ARP高速缓存中查看有无主机B的P地址。如有，就可查出其对应的硬件地址，再将此硬件地址写入MAC帧，然后通过局域网将该MAC帧发往此硬件地址。如果没有，那么就通过广播ARP请求分组，使同一个局域网里的所有主机收到ARP请求。主机B收到该ARP请求后，向主机A发出响应ARP分组，分组中包含主机B的P与MAC地址的映射关系，主机A在收到后将此映射写入ARP缓存，然后按查询到的硬件地址发送MAC帧。

## DHCP动态主机配置协议

给主机分配动态ip地址

DHCP 的工作原理如下:使用客户/服务器方式。需要IP地址的主机在启动时就向DHCP 服务器广播发送发现报文，这时该主机就成为DHCP客户。本地网络上所有主机都能收到此广播报文，但只有DHCP服务器才回答此广播报文。DHCP 服务器先在其数据库中查找该计算机的配置信息。若找到。则返回找到的信息。若找不到，则从服务器的P地址池中取一个地址分配给该计算机。DHCP服务器的回答报文称为提供报文。

## ICMP网际控制报文协议

主机或路由器报告差错或异常的协议,如ping

# 自治系统

## RIP路由信息协议

仅和相邻路由器交换信息。

路由器交换的信息是当前路由器所知道的全部信息，即自己的路由表。

按固定的时间间隔交换路由信息,如每隔30秒。

## OSPF开放最短路径优先协议

1. OSPF向本自治系统中的所有路由器发送信息，这里使用的方法是洪泛法。而RIP仅向自己相邻的几个路由器发送信息。
2. 发送的信息是与本路由器相邻的所有路由器的链路状态，但这只是路由器所知道的部分信息。“链路状态”说明本路由器和哪些路由器相邻及该链路的“度量”(或代价)。而在RIP中，发送的信息是本路由器所知道的全部信息，即整个路由表。
3. 只有当链路状态发生变化时，路由器才用洪泛法向所有路由器发送此信息，并且更新过程收敛得快，不会出现RIP“坏消息传得馒”的问题。而在RIP中，不管网络拓扑是否发生变化，路由器之间都会定期交换路由表的信息。

